(self.webpackChunkblog_vuepress=self.webpackChunkblog_vuepress||[]).push([[694],{1003:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>e});const e={key:"v-06329db8",path:"/advanced/theme.html",title:"开发主题",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"创建一个主题",slug:"创建一个主题",children:[]},{level:2,title:"发布到 NPM",slug:"发布到-npm",children:[{level:3,title:"主题入口",slug:"主题入口",children:[]},{level:3,title:"package.json",slug:"package-json",children:[]}]}],filePathRelative:"advanced/theme.md",git:{updatedTime:1621846301e3}}},2222:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>K});var e=a(6252);const t=(0,e.Wm)("h1",{id:"开发主题"},[(0,e.Wm)("a",{class:"header-anchor",href:"#开发主题"},"#"),(0,e.Uk)(" 开发主题")],-1),p={class:"custom-container tip"},o=(0,e.Wm)("p",{class:"custom-container-title"},"TIP",-1),l=(0,e.Uk)("在阅读该指南之前，你最好先了解一下 "),c=(0,e.Uk)("开发插件"),u=(0,e.Uk)(" 指南。"),m=(0,e.Wm)("h2",{id:"创建一个主题"},[(0,e.Wm)("a",{class:"header-anchor",href:"#创建一个主题"},"#"),(0,e.Uk)(" 创建一个主题")],-1),r=(0,e.Uk)("VuePress 主题是一个特殊的插件，它应该符合 "),i=(0,e.Uk)("主题 API"),k=(0,e.Uk)(" 。和插件一样，主题可以是一个 "),W=(0,e.Wm)("em",null,"主题对象",-1),d=(0,e.Uk)(" 或一个 "),b=(0,e.Wm)("em",null,"主题函数",-1),g=(0,e.Uk)(" 。"),U=(0,e.Wm)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-javascript"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token keyword"},"const"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" path "),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"require"),(0,e.Wm)("span",{class:"token punctuation"},"("),(0,e.Wm)("span",{class:"token string"},"'@vuepress/utils'"),(0,e.Wm)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e.Wm)("span",{class:"token keyword"},"const"),(0,e.Uk)(" fooTheme "),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  name"),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},"'vuepress-theme-foo'"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  layouts"),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    Layout"),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(" path"),(0,e.Wm)("span",{class:"token punctuation"},"."),(0,e.Wm)("span",{class:"token function"},"resolve"),(0,e.Wm)("span",{class:"token punctuation"},"("),(0,e.Uk)("__dirname"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},"'layouts/Layout.vue'"),(0,e.Wm)("span",{class:"token punctuation"},")"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token number"},"404"),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(" path"),(0,e.Wm)("span",{class:"token punctuation"},"."),(0,e.Wm)("span",{class:"token function"},"resolve"),(0,e.Wm)("span",{class:"token punctuation"},"("),(0,e.Uk)("__dirname"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},"'layouts/404.vue'"),(0,e.Wm)("span",{class:"token punctuation"},")"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token comment"},"// ..."),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"4"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"5"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"6"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"7"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"8"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"9"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"10"),(0,e.Wm)("br")])],-1),v=(0,e.Wm)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-javascript"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token keyword"},"const"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)(" path "),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function"},"require"),(0,e.Wm)("span",{class:"token punctuation"},"("),(0,e.Wm)("span",{class:"token string"},"'@vuepress/utils'"),(0,e.Wm)("span",{class:"token punctuation"},")"),(0,e.Uk)("\n\n"),(0,e.Wm)("span",{class:"token keyword"},"const"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token function-variable function"},"fooTheme"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"("),(0,e.Wm)("span",{class:"token parameter"},[(0,e.Uk)("options"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)(" app")]),(0,e.Wm)("span",{class:"token punctuation"},")"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token operator"},"=>"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token keyword"},"return"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n    name"),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},"'vuepress-theme-foo'"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    layouts"),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token punctuation"},"{"),(0,e.Uk)("\n      Layout"),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(" path"),(0,e.Wm)("span",{class:"token punctuation"},"."),(0,e.Wm)("span",{class:"token function"},"resolve"),(0,e.Wm)("span",{class:"token punctuation"},"("),(0,e.Uk)("__dirname"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},"'layouts/Layout.vue'"),(0,e.Wm)("span",{class:"token punctuation"},")"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n      "),(0,e.Wm)("span",{class:"token number"},"404"),(0,e.Wm)("span",{class:"token operator"},":"),(0,e.Uk)(" path"),(0,e.Wm)("span",{class:"token punctuation"},"."),(0,e.Wm)("span",{class:"token function"},"resolve"),(0,e.Wm)("span",{class:"token punctuation"},"("),(0,e.Uk)("__dirname"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)(),(0,e.Wm)("span",{class:"token string"},"'layouts/404.vue'"),(0,e.Wm)("span",{class:"token punctuation"},")"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Wm)("span",{class:"token punctuation"},","),(0,e.Uk)("\n    "),(0,e.Wm)("span",{class:"token comment"},"// ..."),(0,e.Uk)("\n  "),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n"),(0,e.Wm)("span",{class:"token punctuation"},"}"),(0,e.Uk)("\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"2"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"3"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"4"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"5"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"6"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"7"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"8"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"9"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"10"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"11"),(0,e.Wm)("br"),(0,e.Wm)("span",{class:"line-number"},"12"),(0,e.Wm)("br")])],-1),h=(0,e.Wm)("p",null,[(0,e.Wm)("code",null,"layouts"),(0,e.Uk)(" 字段声明了你的主题提供的布局。")],-1),f=(0,e.Wm)("p",null,[(0,e.Uk)("一个主题必须提供至少两个布局："),(0,e.Wm)("code",null,"Layout"),(0,e.Uk)(" 和 "),(0,e.Wm)("code",null,"404"),(0,e.Uk)(" 。")],-1),y=(0,e.Wm)("code",null,"Layout",-1),j=(0,e.Uk)(" 布局应该包含 "),w=(0,e.Uk)("Content"),_=(0,e.Uk)(" 组件来展示 Markdown 内容："),q=(0,e.uE)('<div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Content</span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>404</code> 布局会被用于 <code>404.html</code> 页面：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>404 Not Found<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',3),x=(0,e.Uk)("你可以提供多个布局，用户可以通过 "),P=(0,e.Uk)("layout"),C=(0,e.Uk)(" Frontmatter 来修改布局。"),L=(0,e.uE)('<h2 id="发布到-npm"><a class="header-anchor" href="#发布到-npm">#</a> 发布到 NPM</h2><p>一个典型的主题 Package 的结构如下所示：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vuepress-theme-foo\n├─ lib\n│  ├─ layouts\n│  │  ├─ Layout.vue\n│  │  └─ <span class="token number">404</span>.vue\n│  └─ index.js\n└─ package.json\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="主题入口"><a class="header-anchor" href="#主题入口">#</a> 主题入口</h3><p><code>lib/index.js</code> 文件是主题入口，它应当直接导出主题：</p>',5),M=(0,e.Wm)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-javascript"},[(0,e.Wm)("code",null,[(0,e.Uk)("module"),(0,e.Wm)("span",{class:"token punctuation"},"."),(0,e.Uk)("exports "),(0,e.Wm)("span",{class:"token operator"},"="),(0,e.Uk)(" fooTheme\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),N=(0,e.Wm)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e.Wm)("pre",{class:"language-javascript"},[(0,e.Wm)("code",null,[(0,e.Wm)("span",{class:"token keyword"},"export"),(0,e.Uk)(),(0,e.Wm)("span",{class:"token keyword"},"default"),(0,e.Uk)(" fooTheme\n")])]),(0,e.Wm)("div",{class:"line-numbers"},[(0,e.Wm)("span",{class:"line-number"},"1"),(0,e.Wm)("br")])],-1),T={class:"custom-container tip"},E=(0,e.Wm)("p",{class:"custom-container-title"},"TIP",-1),S=(0,e.Wm)("p",null,"注意，主题入口会在 Node 中被加载，因此它应为 CommonJS 格式。",-1),I=(0,e.Uk)("如果你使用 ESM 格式，你需要使用 "),J={href:"https://babeljs.io/",target:"_blank",rel:"noopener noreferrer"},F=(0,e.Uk)("babel"),G=(0,e.Uk)(" 或 "),R={href:"https://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"},z=(0,e.Uk)("typescript"),A=(0,e.Uk)(" 来将它编译成 CommonJS 。"),H=(0,e.Wm)("h3",{id:"package-json"},[(0,e.Wm)("a",{class:"header-anchor",href:"#package-json"},"#"),(0,e.Uk)(" package.json")],-1),O=(0,e.Uk)("为了把 Package 发布到 NPM 上，"),V={href:"https://docs.npmjs.com/cli/v6/configuring-npm/package-json",target:"_blank",rel:"noopener noreferrer"},Y=(0,e.Uk)("package.json"),B=(0,e.Uk)(" 文件是必需的："),D=(0,e.uE)('<div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress-theme-foo&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">&quot;vuepress-theme&quot;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lib/index.js&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">&quot;lib&quot;</span>\n  <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>将 <code>name</code> 按照约定命名： <code>vuepress-theme-xxx</code> 或 <code>@org/vuepress-theme-xxx</code> 。</li><li>在 <code>keywords</code> 中包含 <code>vuepress-theme</code> ，这样用户可以在 NPM 上搜索到你的主题。</li><li>将 <code>main</code> 设为主题入口文件。</li><li>设置 <code>files</code> ，仅发布 <code>lib</code> 目录下的文件。</li></ul>',2),K={render:function(n,s){const a=(0,e.up)("RouterLink"),K=(0,e.up)("CodeGroupItem"),Q=(0,e.up)("CodeGroup"),X=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.j4)(e.HY,null,[t,(0,e.Wm)("div",p,[o,(0,e.Wm)("p",null,[l,(0,e.Wm)(a,{to:"/advanced/plugin.html"},{default:(0,e.w5)((()=>[c])),_:1}),u])]),m,(0,e.Wm)("p",null,[r,(0,e.Wm)(a,{to:"/reference/theme-api.html"},{default:(0,e.w5)((()=>[i])),_:1}),k,W,d,b,g]),(0,e.Wm)(Q,null,{default:(0,e.w5)((()=>[(0,e.Wm)(K,{title:"主题对象",active:""},{default:(0,e.w5)((()=>[U])),_:1}),(0,e.Wm)(K,{title:"主题函数"},{default:(0,e.w5)((()=>[v])),_:1})])),_:1}),h,f,(0,e.Wm)("p",null,[y,j,(0,e.Wm)(a,{to:"/reference/components.html#content"},{default:(0,e.w5)((()=>[w])),_:1}),_]),q,(0,e.Wm)("p",null,[x,(0,e.Wm)(a,{to:"/reference/frontmatter.html#layout"},{default:(0,e.w5)((()=>[P])),_:1}),C]),L,(0,e.Wm)(Q,null,{default:(0,e.w5)((()=>[(0,e.Wm)(K,{title:"CJS",active:""},{default:(0,e.w5)((()=>[M])),_:1}),(0,e.Wm)(K,{title:"ESM"},{default:(0,e.w5)((()=>[N])),_:1})])),_:1}),(0,e.Wm)("div",T,[E,S,(0,e.Wm)("p",null,[I,(0,e.Wm)("a",J,[F,(0,e.Wm)(X)]),G,(0,e.Wm)("a",R,[z,(0,e.Wm)(X)]),A])]),H,(0,e.Wm)("p",null,[O,(0,e.Wm)("a",V,[Y,(0,e.Wm)(X)]),B]),D],64)}}}}]);